#include <stdio.h>
#include <time.h>

int ts_major = GetTsVersionMajor();
int ts_minor = GetTsVersionMinor();
int ts_patch = GetTsVersionPl();

char repo_name[40]="cam-ts"; //Set this to be the name of your repository


char sourcedir[PATH_MAX];
int num= 100;
char flist[128][128];
char help_file[128]="";
char sys_cmd[PATH_MAX]="";

GETCURDATA

sprintf(sourcedir,"/opt/%s%i/cam_help/",repo_name,ts_major);

#ifdef HAS_WINDOWS_FEATURES
   sprintf(sourcedir,"C:\\Bruker\\%s%i\\cam_help\\",repo_name,ts_major);

#else //Not actually checked this on linux... We have no linux xpectrometers
 		sprintf(sourcedir,"/opt/%s%i/cam_help/",repo_name,ts_major);

#endif
//Proc_err(DEF_ERR_OPT, "sourcedir variable is - %s",sourcedir);

if (i1 = FileSelect(sourcedir, flist, &num, 0)< 0)
{

//Proc_err(DEF_ERR_OPT, "Error - no help files found");
}

else
{
   sprintf(help_file,"%s",flist[0]);
   //Proc_err(DEF_ERR_OPT,"Help file selected - %s", flist[0]);
   //Proc_err(DEF_ERR_OPT,"Help file selected - %s", help_file);
   #ifdef HAS_WINDOWS_FEATURES
        sprintf(sys_cmd,"start chrome \"%s%s\" ",sourcedir,help_file);

   #else //Not actually checked this on linux... We have no linux xpectrometers
 		sprintf(sys_cmd,"open -a \"Google Chrome\" %s%s ",sourcedir,help_file);

   #endif
   //Proc_err(DEF_ERR_OPT,"sys_cmd - %s", sys_cmd);
   system(sys_cmd);
}
QUIT