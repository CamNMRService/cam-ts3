/*** ^^A -*-C++-*- **********************************************/
/*	au_zgonly_report		08.04.1998			*/
/****************************************************************/
/*	Short Description :					*/
/*	General AU program for data acquisition.		*/
/****************************************************************/
/*	Keywords :						*/
/*	zg, gradshim, gradient shimming				*/
/****************************************************************/
/*	Description/Usage :					*/
/*	General AU program for data acquisition. No rga is	*/
/*	done, only zg. This AU program is used by the gradient	*/
/*	shimming interface 'gradshim'.				*/
/****************************************************************/
/*	Author(s) :						*/
/*	Name		: Mike Engelhardt 			*/
/*	Organisation	: Bruker Analytik			*/
/*	Email		: michael.engelhardt@bruker.de		*/
/****************************************************************/
/*	Name		Date	Modification:			*/
/*	eng		980408	created				*/
// PTG Pulsecal done before ZG; pulsecal file written - nb p1 should be set by getprosol before running this!!
/****************************************************************/
/*
$Id: au_zgonly,v 1.2 2000/07/12 11:39:40 gsc Exp $
*/
char solvent[128];
float newp1,origp1;
char results_content[128];
char pulsecalcontent[128];
char results_file_name[PATH_MAX];
char pulsecalfilename[PATH_MAX];
FILE *results_file = NULL;
FILE *pulsecalfile = NULL;
sprintf(results_file_name,"C:\\Bruker\\diskless\\prog\\logfiles\\pulsecallog");
sprintf(pulsecalfilename,"%s\\%s\\pulsecal",disk,name);
GETCURDATA
FETCHPAR("P 1", &origp1)
XAU("pulsecal","quiet")
RGA
ZG
FETCHPARS("P 1", &newp1)
FETCHPARS("SOLVENT",solvent)
sprintf(results_content,"%s %s %f\n",name,solvent,newp1);
sprintf(pulsecalcontent,"%f %f",newp1,origp1);
if ((pulsecalfile = fopen(pulsecalfilename, "w")) == 0)
{
	
} else {
     fputs(pulsecalcontent, pulsecalfile);
     fclose(pulsecalfile);
}
if ((results_file = fopen(results_file_name, "a+")) == 0)
{
	STOP
} else {
     fputs(results_content, results_file);
     fclose(results_file);
}
QUIT
